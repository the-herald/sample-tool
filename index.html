<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>PPC Gadget — RSA Builder (Pro)</title>
<style>
  /* =====================
     THEMES
  ======================*/
  :root{
    --bg:#0b0e13; --panel:#121621; --panel-2:#0f1422; --line:#202635;
    --text:#e8ecf3; --muted:#9aa3b7; --brand:#6DBE45;
    --ok:#22c884; --warn:#f5c558; --bad:#ff6b6d;
    --chip:#273047; --chipText:#d9e2ff;
    --preview-bg:#fff; --preview-text:#111; --preview-muted:#5f6368;
    --preview-blue:#174ea6; --preview-chip:#e8f0fe; --preview-link:#1a0dab; --preview-green:#0f9d58;
  }
  [data-theme="light"]{
    --bg:#f6f7fb; --panel:#ffffff; --panel-2:#ffffff; --line:#e7e9f2;
    --text:#0f1422; --muted:#56607a; --brand:#2f8d19;
    --chip:#eef2ff; --chipText:#2c3b64;
  }
  *{box-sizing:border-box}
  html,body{margin:0;height:100%;background:var(--bg);color:var(--text);font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
  a{color:var(--brand);text-decoration:none}
  .wrap{max-width:1280px;margin:0 auto;padding:20px}
  header{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;gap:10px}
  .title{display:flex;align-items:center;gap:10px}
  .dot{width:10px;height:10px;border-radius:50%;background:var(--brand)}
  h1{font-size:18px;margin:0}
  .controls{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
  .btn{
    background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(0,0,0,.06));
    border:1px solid var(--line); color:var(--text); padding:10px 14px; border-radius:12px; cursor:pointer; font-size:14px;
  }
  .btn.primary{background:linear-gradient(180deg,#6DBE45,#479e23); border-color:#3a8a1d; color:#fff}
  .btn:active{transform:translateY(1px)}
  .grid{display:grid;grid-template-columns:1.1fr .9fr;gap:16px}
  .card{background:var(--panel);border:1px solid var(--line);border-radius:14px;overflow:hidden}
  .card h2{margin:0;padding:14px 16px;border-bottom:1px solid var(--line);font-size:15px;color:var(--muted);font-weight:600}
  .content{padding:14px}
  label{font-size:13px;color:var(--muted);display:block;margin-bottom:6px}
  input[type="text"], textarea, select{
    width:100%; background:var(--panel-2); color:var(--text);
    border:1px solid var(--line); border-radius:10px; padding:10px 12px; font-size:14px; outline:none; resize:vertical;
  }
  textarea{min-height:90px}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  .hint{font-size:12px;color:var(--muted);margin-top:6px}
  .list{margin:10px 0 0;padding:0;list-style:none;border:1px dashed var(--line);border-radius:12px}
  .list li{display:grid;grid-template-columns:auto 1fr auto auto;align-items:center;gap:10px;padding:8px 10px;border-top:1px dashed var(--line)}
  .list li:first-child{border-top:none}
  .chip{font-size:11px;border-radius:999px;padding:2px 8px;background:var(--chip);color:var(--chipText)}
  .ok{background:rgba(34,200,132,.14);color:#aaf4d0}
  .warn{background:rgba(245,197,88,.16);color:#ffe4a0}
  .bad{background:rgba(255,107,109,.16);color:#ffc1c2}
  .mini{display:flex;gap:6px;align-items:center}
  .pin{display:flex;gap:6px}
  .pin button{
    border:1px solid var(--line); background:var(--panel-2); color:var(--text); border-radius:8px; padding:4px 8px; font-size:12px; cursor:pointer;
  }
  .pin .active{background:var(--brand);color:#fff;border-color:#2b7d16}
  .inline{display:flex;gap:8px}
  .addline{display:flex;gap:8px;margin-top:8px}
  .addline input{flex:1}
  .hr{height:1px;background:var(--line);margin:12px 0}
  .pill{font-size:12px;padding:2px 8px;border-radius:999px;border:1px solid var(--line);color:var(--muted)}
  .flex{display:flex;gap:10px;flex-wrap:wrap;align-items:center}

  /* Preview */
  .previews{display:grid;grid-template-columns:1fr 380px;gap:14px}
  .preview-card{background:var(--preview-bg);color:var(--preview-text);border-radius:12px;border:1px solid #e3e6ef;padding:14px}
  .preview-header{display:flex;align-items:center;gap:8px;margin-bottom:10px}
  .g{width:24px;height:24px;border-radius:6px;background:#4285F4}
  .searchbar{flex:1;border:1px solid #dadce0;border-radius:999px;padding:8px 12px;font-size:14px;display:flex;gap:8px;align-items:center;background:#fff}
  .searchbar input{border:none;outline:none;flex:1;font-size:14px}
  .serp-url{color:var(--preview-link);font-size:18px;font-weight:600;margin:8px 0 4px}
  .serp-path{color:var(--preview-green);font-size:12px;margin-bottom:8px}
  .serp-hline{display:flex;flex-wrap:wrap;gap:4px;margin:6px 0}
  .serp-h{background:var(--preview-chip);color:var(--preview-blue);border-radius:4px;padding:2px 4px;font-weight:700}
  .serp-desc{color:#3c4043;font-size:14px;line-height:1.35}
  .callouts{font-size:12px;color:#5f6368;margin-top:8px}
  .snip{margin-top:4px;font-size:12px;color:#3c4043}
  .muted{color:#5f6368}
  .mobile-frame{max-width:360px;border:10px solid #e7eaef;border-radius:24px;margin:0 auto;background:#fff}
  .badge{font-size:11px;border:1px solid #dfe3ec;border-radius:6px;padding:2px 6px;color:#5a657c}
  .save{font-size:12px;color:var(--muted)}
  .topbar{display:flex;gap:10px;align-items:center}

  /* Theme toggle */
  .switch{position:relative;display:inline-block;width:52px;height:28px}
  .switch input{display:none}
  .slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background:#d1d6e3;border-radius:999px;transition:.2s}
  .slider:before{position:absolute;content:"";height:22px;width:22px;left:3px;top:3px;background:#fff;border-radius:50%;transition:.2s}
  input:checked + .slider{background:#111827}
  input:checked + .slider:before{transform:translateX(24px)}
  .theme-label{font-size:12px;color:var(--muted)}
  @media (max-width: 1060px){ .grid{grid-template-columns:1fr} .previews{grid-template-columns:1fr} }
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="title">
        <span class="dot"></span>
        <h1>PPC Gadget — RSA Builder (Dark/Light • Pins • Mobile/Desk)</h1>
      </div>
      <div class="controls">
        <div class="topbar">
          <span class="theme-label">Theme</span>
          <label class="switch">
            <input id="themeToggle" type="checkbox">
            <span class="slider"></span>
          </label>
        </div>
        <button class="btn" id="clearBtn">Clear</button>
        <button class="btn" id="updateBtn">Update</button>
        <button class="btn primary" id="shareBtn">Share / Copy Link</button>
        <span id="saveNote" class="save"></span>
      </div>
    </header>

    <div class="grid">
      <!-- LEFT: INPUTS -->
      <section class="card">
        <h2>Inputs</h2>
        <div class="content">
          <div class="row">
            <div>
              <label>Bulk Headlines (one per line) <span class="pill">max 15 • ≤ 30 chars</span></label>
              <textarea id="bulkHeads" placeholder="Paste lines here to replace the headlines list…"></textarea>
              <div class="flex">
                <button class="btn" id="replaceHeadsBtn">Replace List</button>
                <span class="hint">You can also add headlines one by one below, and pin them to H1/H2/H3.</span>
              </div>

              <div class="addline">
                <input id="headInput" type="text" placeholder="Add headline…" />
                <button class="btn" id="addHeadBtn">Add</button>
              </div>

              <ul id="headList" class="list"></ul>
            </div>

            <div>
              <label>Bulk Descriptions (one per line) <span class="pill">max 4 • ≤ 90 chars</span></label>
              <textarea id="bulkDescs" placeholder="Paste lines here to replace the descriptions list…"></textarea>
              <div class="addline">
                <input id="descInput" type="text" placeholder="Add description…" />
                <button class="btn" id="addDescBtn">Add</button>
              </div>
              <ul id="descList" class="list"></ul>
            </div>
          </div>

          <div class="row" style="margin-top:12px">
            <div>
              <label>Callouts (one per line) <span class="pill">≤ 25</span></label>
              <textarea id="bulkCallouts" placeholder="Free Estimates&#10;Fully Insured&#10;Warranty Backed"></textarea>
              <div class="addline">
                <input id="callInput" type="text" placeholder="Add callout…" />
                <button class="btn" id="addCallBtn">Add</button>
              </div>
              <ul id="callList" class="list"></ul>
            </div>

            <div>
              <label>Structured Snippet</label>
              <div class="row">
                <select id="snippetHeader">
                  <option value="Services">Services</option>
                  <option value="Types">Types</option>
                  <option value="Brands">Brands</option>
                  <option value="Styles">Styles</option>
                  <option value="Areas">Areas</option>
                </select>
                <input id="displayPath" type="text" placeholder="Display Path (optional): e.g. home • stucco"/>
              </div>
              <label style="margin-top:8px">Snippet Values (one per line) <span class="pill">≤ 10 • ≤ 25 chars</span></label>
              <textarea id="bulkSnips" placeholder="Installation&#10;Repair&#10;Re-Stucco"></textarea>
              <div class="addline">
                <input id="snipInput" type="text" placeholder="Add snippet value…" />
                <button class="btn" id="addSnipBtn">Add</button>
              </div>
              <ul id="snipList" class="list"></ul>
            </div>
          </div>
        </div>
      </section>

      <!-- RIGHT: PREVIEWS -->
      <section class="card">
        <h2>Live Preview</h2>
        <div class="content previews">

          <!-- Desktop -->
          <div class="preview-card">
            <div class="preview-header">
              <div class="g"></div>
              <div class="searchbar">
                <svg width="16" height="16" viewBox="0 0 24 24"><path fill="#5f6368" d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16a6.471 6.471 0 004.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
                <input id="searchQuery" type="text" placeholder="Search Google…" />
                <span class="badge">Desktop</span>
              </div>
            </div>

            <div class="serp-url" id="pTitle">Your Business - example.com</div>
            <div class="serp-path">example.com<span id="pPathTrail" class="muted"></span></div>
            <div class="serp-hline" id="pHeadsDesk"></div>
            <div class="serp-desc" id="pDescsDesk"></div>
            <div class="callouts" id="pCalloutsDesk"></div>
            <div class="snip" id="pSnippetDesk"></div>
          </div>

          <!-- Mobile -->
          <div class="mobile-frame">
            <div class="preview-card" style="border:none">
              <div class="preview-header">
                <div class="g"></div>
                <div class="searchbar">
                  <input id="searchQueryMobile" type="text" placeholder="Search Google…" />
                  <span class="badge">Mobile</span>
                </div>
              </div>

              <div class="serp-url" id="pTitleM">Your Business - example.com</div>
              <div class="serp-path">example.com<span id="pPathTrailM" class="muted"></span></div>
              <div class="serp-hline" id="pHeadsMob"></div>
              <div class="serp-desc" id="pDescsMob"></div>
              <div class="callouts" id="pCalloutsMob"></div>
              <div class="snip" id="pSnippetMob"></div>
            </div>
          </div>

        </div>
      </section>
    </div>
  </div>

<script>
/* ===========================
   CONFIG & STATE
=========================== */
const LIMITS = { head:30, desc:90, call:25, snip:25, maxH:15, maxD:4, maxSV:10 };
const $ = id => document.getElementById(id);

let State = {
  theme: 'dark',
  search: '',
  heads: [],            // [{t:'text', pin:0|1|2|3}]
  descs: [],
  calls: [],
  sh: 'Services',
  sv: [],
  path: ''
};

/* ===========================
   THEME
=========================== */
const themeToggle = $('themeToggle');
function loadTheme(){
  const t = localStorage.getItem('ppc_theme') || 'dark';
  document.documentElement.setAttribute('data-theme', t);
  themeToggle.checked = (t === 'dark') ? true : false; // checked = dark for this switch style
  State.theme = t;
}
function toggleTheme(){
  const t = themeToggle.checked ? 'dark' : 'light';
  document.documentElement.setAttribute('data-theme', t);
  localStorage.setItem('ppc_theme', t);
  State.theme = t;
  render();
}
themeToggle.addEventListener('change', toggleTheme);

/* ===========================
   HELPERS
=========================== */
const lines = s => (s||'').replace(/\r/g,'').split('\n').map(x=>x.trim()).filter(Boolean);
const clamp = (arr, n) => arr.slice(0, n);
const enc = obj => btoa(unescape(encodeURIComponent(JSON.stringify(obj))));
const dec = str => JSON.parse(decodeURIComponent(escape(atob(str))));
function classify(len, limit){
  if(len === 0) return 'warn';
  if(len <= limit) return 'ok';
  if(len <= limit+10) return 'warn';
  return 'bad';
}
function headTop3(){
  // pinned first (1,2,3), then fill by order
  const out = [];
  for(let p=1;p<=3;p++){
    const h = State.heads.find(x=>x.pin===p);
    if(h) out.push(h.t);
  }
  if(out.length<3){
    State.heads.forEach(x=>{
      if(out.length<3 && !out.includes(x.t) && x.pin===0) out.push(x.t);
    });
  }
  return out;
}

/* ===========================
   RENDER LISTS
=========================== */
function renderHeads(){
  const ul = $('headList'); ul.innerHTML='';
  if(State.heads.length===0){ ul.innerHTML = `<li><span class="muted" style="grid-column:span 4">No headlines yet</span></li>`; return; }
  State.heads.forEach((h,idx)=>{
    const li = document.createElement('li');
    const c = classify(h.t.length, LIMITS.head);
    li.innerHTML = `
      <span class="chip ${c}">${h.t.length}/${LIMITS.head}</span>
      <span>${h.t.replace(/[&<>"]/g, m=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"}[m]))}</span>
      <div class="pin">
        <button data-pin="1" data-idx="${idx}" class="${h.pin===1?'active':''}">Pin 1</button>
        <button data-pin="2" data-idx="${idx}" class="${h.pin===2?'active':''}">Pin 2</button>
        <button data-pin="3" data-idx="${idx}" class="${h.pin===3?'active':''}">Pin 3</button>
      </div>
      <div class="mini">
        <button class="btn" data-up="${idx}" style="padding:4px 8px;font-size:12px">↑</button>
        <button class="btn" data-down="${idx}" style="padding:4px 8px;font-size:12px">↓</button>
        <button class="btn" data-del="${idx}" style="padding:4px 8px;font-size:12px">✕</button>
      </div>
    `;
    ul.appendChild(li);
  });

  // events
  ul.querySelectorAll('button[data-pin]').forEach(b=>{
    b.onclick = e=>{
      const idx = +b.dataset.idx, p = +b.dataset.pin;
      // toggle: if already pinned at p, unpin; else set; also remove any other headline with same pin
      if(State.heads[idx].pin===p){ State.heads[idx].pin=0; }
      else {
        State.heads.forEach(x=>{ if(x.pin===p) x.pin=0; });
        State.heads[idx].pin = p;
      }
      renderHeads(); render();
    }
  });
  ul.querySelectorAll('button[data-del]').forEach(b=>{
    b.onclick = ()=>{ State.heads.splice(+b.dataset.del,1); renderHeads(); render(); }
  });
  ul.querySelectorAll('button[data-up]').forEach(b=>{
    b.onclick = ()=>{ const i=+b.dataset.up; if(i>0){ [State.heads[i-1],State.heads[i]]=[State.heads[i],State.heads[i-1]]; renderHeads(); render(); } }
  });
  ul.querySelectorAll('button[data-down]').forEach(b=>{
    b.onclick = ()=>{ const i=+b.dataset.down; if(i<State.heads.length-1){ [State.heads[i+1],State.heads[i]]=[State.heads[i],State.heads[i+1]]; renderHeads(); render(); } }
  });
}
function renderSimpleList(listEl, arr, limit, type){
  listEl.innerHTML='';
  if(arr.length===0){ listEl.innerHTML = `<li><span class="muted" style="grid-column:span 4">No ${type}</span></li>`; return; }
  arr.forEach((t,idx)=>{
    const li = document.createElement('li');
    const c = classify(t.length, limit);
    li.innerHTML = `
      <span class="chip ${c}">${t.length}/${limit}</span>
      <span>${t.replace(/[&<>"]/g, m=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"}[m]))}</span>
      <span></span>
      <div class="mini">
        <button class="btn" data-up="${idx}" style="padding:4px 8px;font-size:12px">↑</button>
        <button class="btn" data-down="${idx}" style="padding:4px 8px;font-size:12px">↓</button>
        <button class="btn" data-del="${idx}" style="padding:4px 8px;font-size:12px">✕</button>
      </div>`;
    listEl.appendChild(li);
  });
  listEl.querySelectorAll('button[data-del]').forEach(b=>{
    b.onclick = ()=>{ arr.splice(+b.dataset.del,1); renderAllLists(); render(); }
  });
  listEl.querySelectorAll('button[data-up]').forEach(b=>{
    b.onclick = ()=>{ const i=+b.dataset.up; if(i>0){ [arr[i-1],arr[i]]=[arr[i],arr[i-1]]; renderAllLists(); render(); } }
  });
  listEl.querySelectorAll('button[data-down]').forEach(b=>{
    b.onclick = ()=>{ const i=+b.dataset.down; if(i<arr.length-1){ [arr[i+1],arr[i]]=[arr[i],arr[i+1]]; renderAllLists(); render(); } }
  });
}
function renderAllLists(){
  renderHeads();
  renderSimpleList($('descList'), State.descs, LIMITS.desc, 'descriptions');
  renderSimpleList($('callList'), State.calls, LIMITS.call, 'callouts');
  renderSimpleList($('snipList'), State.sv, LIMITS.snip, 'snippet values');
}

/* ===========================
   PREVIEW RENDER
=========================== */
function render(){
  // search sync
  $('searchQuery').value = State.search;
  $('searchQueryMobile').value = State.search;

  // paths
  $('pPathTrail').textContent = State.path? `  ›  ${State.path}` : '';
  $('pPathTrailM').textContent = State.path? `  ›  ${State.path}` : '';

  const H = headTop3();
  const D1 = State.descs[0] || 'Add a description (≤ 90 chars).';
  const D2 = State.descs[1] || '';

  function fillHeads(el, arr){
    el.innerHTML='';
    if(arr.length===0){ el.innerHTML = `<span class="serp-h">Add a headline…</span>`; return; }
    arr.forEach(h=>{
      const s = document.createElement('span'); s.className='serp-h'; s.textContent=h; el.appendChild(s);
    });
  }

  fillHeads($('pHeadsDesk'), H);
  fillHeads($('pHeadsMob'), H);
  $('pDescsDesk').textContent = D2 ? `${D1}  ${D2}` : D1;
  $('pDescsMob').textContent  = D2 ? `${D1}  ${D2}` : D1;

  const calls = State.calls.join('  ·  ');
  $('pCalloutsDesk').textContent = calls;
  $('pCalloutsMob').textContent  = calls;

  const snipText = State.sv.length ? `${State.sh}: ${State.sv.join(' • ')}` : '';
  $('pSnippetDesk').textContent = snipText;
  $('pSnippetMob').textContent  = snipText;
}

/* ===========================
   SHARE / LOAD
=========================== */
function share(){
  const payload = {
    theme: State.theme,
    q: State.search,
    h: State.heads,   // keep pins
    d: clamp(State.descs, LIMITS.maxD),
    c: State.calls,
    sh: State.sh,
    sv: clamp(State.sv, LIMITS.maxSV),
    p: State.path
  };
  const hash = enc(payload);
  location.hash = hash;
  navigator.clipboard.writeText(location.href).then(()=>{
    $('saveNote').textContent = 'Link copied. Anyone with this URL will see the same ad, theme & search.';
    setTimeout(()=>{$('saveNote').textContent='';}, 3200);
  }).catch(()=>{
    $('saveNote').textContent = 'URL updated — copy from address bar.';
    setTimeout(()=>{$('saveNote').textContent='';}, 3200);
  });
}
function load(){
  if(location.hash.length>1){
    try{
      const obj = dec(location.hash.slice(1));
      State.theme = obj.theme || 'dark';
      document.documentElement.setAttribute('data-theme', State.theme);
      themeToggle.checked = (State.theme==='dark');
      State.search = obj.q || '';
      State.heads  = (obj.h||[]).map(x=>({t:x.t, pin:x.pin||0})).slice(0, LIMITS.maxH);
      State.descs  = (obj.d||[]).slice(0, LIMITS.maxD);
      State.calls  = (obj.c||[]);
      State.sh     = obj.sh || 'Services';
      State.sv     = (obj.sv||[]).slice(0, LIMITS.maxSV);
      State.path   = obj.p || '';
      $('snippetHeader').value = State.sh;
      $('displayPath').value = State.path;
    }catch(e){}
  } else {
    // Demo fill
    State.heads = [
      {t:"Local Stucco Contractors",pin:1},
      {t:"Get a Free Estimate Today",pin:2},
      {t:"Licensed & Insured Teams",pin:3},
      {t:"Trusted Local Experts",pin:0},
      {t:"Premium Stucco Materials",pin:0}
    ];
    State.descs = [
      "Hire licensed stucco contractors near you for quality results.",
      "From homes to exteriors, we install and repair stucco right.",
      "Work with trusted stucco companies delivering lasting exteriors.",
      "Get a free stucco estimate today from local professionals."
    ];
    State.calls = ["Free Estimates","Fully Insured","Warranty Backed","Local Pros"];
    State.sh = 'Services';
    State.sv = ["Installation","Repair","Re-Stucco","Exterior Stucco"];
    State.path = "home • stucco";
    $('snippetHeader').value = State.sh;
    $('displayPath').value = State.path;
  }
  renderAllLists(); render();
}

/* ===========================
   EVENTS
=========================== */
// Bulk replacements
$('replaceHeadsBtn').onclick = ()=>{
  const arr = clamp(lines($('bulkHeads').value), LIMITS.maxH);
  State.heads = arr.map(t=>({t, pin:0}));
  renderHeads(); render();
};
$('addHeadBtn').onclick = ()=>{
  const t = $('headInput').value.trim(); if(!t) return;
  if(State.heads.length>=LIMITS.maxH) return;
  State.heads.push({t, pin:0}); $('headInput').value=''; renderHeads(); render();
};

$('addDescBtn').onclick = ()=>{
  const t = $('descInput').value.trim(); if(!t) return;
  if(State.descs.length>=LIMITS.maxD) return;
  State.descs.push(t); $('descInput').value=''; renderAllLists(); render();
};
$('addCallBtn').onclick = ()=>{
  const t = $('callInput').value.trim(); if(!t) return;
  State.calls.push(t); $('callInput').value=''; renderAllLists(); render();
};
$('addSnipBtn').onclick = ()=>{
  const t = $('snipInput').value.trim(); if(!t) return;
  if(State.sv.length>=LIMITS.maxSV) return;
  State.sv.push(t); $('snipInput').value=''; renderAllLists(); render();
};

// Bulk textareas update lists live when changed (optional light behavior)
$('bulkDescs').addEventListener('change', ()=>{
  State.descs = clamp(lines($('bulkDescs').value), LIMITS.maxD); renderAllLists(); render();
});
$('bulkCallouts').addEventListener('change', ()=>{
  State.calls = lines($('bulkCallouts').value); renderAllLists(); render();
});
$('bulkSnips').addEventListener('change', ()=>{
  State.sv = clamp(lines($('bulkSnips').value), LIMITS.maxSV); renderAllLists(); render();
});

// Snippet header & path
$('snippetHeader').addEventListener('change', e=>{ State.sh = e.target.value; render(); });
$('displayPath').addEventListener('input', e=>{ State.path = e.target.value.trim(); render(); });

// Search query (both inputs sync)
$('searchQuery').addEventListener('input', e=>{ State.search = e.target.value; $('searchQueryMobile').value = State.search; });
$('searchQueryMobile').addEventListener('input', e=>{ State.search = e.target.value; $('searchQuery').value = State.search; });

// Global buttons
$('shareBtn').onclick = share;
$('updateBtn').onclick = render;
$('clearBtn').onclick = ()=>{
  State.search=''; State.heads=[]; State.descs=[]; State.calls=[]; State.sh='Services'; State.sv=[]; State.path='';
  $('snippetHeader').value = State.sh; $('displayPath').value='';
  ['bulkHeads','bulkDescs','bulkCallouts','bulkSnips','headInput','descInput','callInput','snipInput','searchQuery','searchQueryMobile'].forEach(id=>$(id).value='');
  renderAllLists(); render();
};

// Boot
loadTheme();
load();
</script>
</body>
</html>
